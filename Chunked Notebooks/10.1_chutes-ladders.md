page_content='```python\nimport numpy as np\nimport quantecon as qe  \nnp.set_printoptions(precision=3, suppress=True)  \n```  \n![http://jakevdp.github.io/images/ChutesAndLadders-board.gif](http://jakevdp.github.io/images/ChutesAndLadders-board.gif)  \n```python' metadata={}page_content='chutes_ladders = {\n1:38, 4:14, 9:31, 16:6, 21:42, 28:84, 36:44,\n47:26, 49:11, 51:67, 56:53, 62:19, 64:60,\n71:91, 80:100, 87:24, 93:73, 95:75, 98:78\n}\n```  \n```python\ndef make_P(N, chutes_ladders):' metadata={'Header 1': 'Mapping of start : end spaces of chutes & ladders'}page_content='P = np.zeros((N+1, N+1))' metadata={'Header 1': '- row `i` represents the probability of beginning your turn on square i and ending on any other square.'}page_content='for i in range(1, N+1):\nP[i-1, i:(i+6)] = 1/6' metadata={'Header 1': 'start with basic case, ignoring all chutes and ladders'}page_content='P[N, N] = 1' metadata={'Header 1': 'once you are here, you win!'}page_content='P[95:100,100] += np.linspace(1/6, 5/6, 5)  \nfor (i1, i2) in chutes_ladders.items():' metadata={'Header 1': "House rules: you don't need to land on 100, just reach it."}page_content="iw = np.where(P[:, i1] > 0)\nP[:, i1] = 0  # can't land here...\nP[iw, i2] += 1/6  # move to i2 instead  \nreturn P  \n```  \n```python\nP = make_P(100, chutes_ladders)\n```  \n```python\nP[0, 1:7]\n```  \n```python\nP[0, [14, 38]]\n```  \n```python\nP.sum(axis=1)\n```  \n```python\nmc = qe.MarkovChain(P)\n```  \nQuestions  \n- Stationary Distribution\n- Distribution after N rounds\n- Expected number of rounds\n- Percent of games finished in N rounds  \n```python\nmc.stationary_distributions  # the game always ends!\n```  \n```python\nsimulations = mc.simulate(200, init=0, num_reps=5000)\n```  \n```python\nsimulations[0, :]\n```  \n```python\n(simulations[0, :] < 100).sum()\n```  \n```python\nimport matplotlib.pyplot as plt\n```  \n```python\nstopping_times = (simulations < 100).sum(axis=1)\n```  \n```python\nfig, ax = plt.subplots(figsize=(10, 8))  \nax.hist(stopping_times, bins=20, density=True, cumulative=True)\n```  \n```python\nsimulations\n```  \n```python\ns0 = np.zeros(101)\ns0[0] = 1\n```  \n```python\ns0 @ np.linalg.matrix_power(P, 100)\n```  \n```python" metadata={'Header 1': 'iw keeps track of when we would have landed on i1'}page_content='s1 = s0@P\ns1\n```  \n```python' metadata={'Header 1': 'distribution after 1 round'}page_content='s2 = s1 @ P  # == s0 @ P @ P\ns2\n```  \n```python' metadata={'Header 1': 'distribution after 2 rounds'}page_content='s0 @ np.linalg.matrix_power(P, 100)\n```  \n```python\npct_finished_at_round = (simulations == 100).mean(axis=0)\n```  \n```python\npct_finished_at_round[-10]\n```  \n```python\nimport matplotlib.pyplot as plt\n%matplotlib inline  \nfig, ax = plt.subplots()\nax.plot(pct_finished_at_round)\nax.set_xlabel("round number")\nax.set_ylabel("cumulative percent of games finished")\n```  \n```python  \n```' metadata={'Header 1': 'distribution after 100 rounds'}